---
sidebar_position: 3
title: Docker Integration
description: Use Cortex with Docker for containerized development and deployment. Build, manage, and orchestrate containers.
keywords: [docker, containers, compose, kubernetes, deployment]
---

# Docker Integration

This tutorial covers using CX Linux for Docker operations. From basic container management to complex orchestration, CX Linux simplifies containerized workflows.

## Time Required

- Basic Docker: 10 minutes
- Full orchestration: 30-60 minutes

## Prerequisites

- Docker installed (or let Cortex install it)
- Cortex installed

## Installing Docker

### Quick Install

```bash
cx "install docker"
```

Cortex will:
1. Add Docker repository
2. Install Docker CE
3. Install Docker Compose
4. Add your user to the docker group
5. Start and enable Docker service

### Verify Installation

```bash
cx "verify docker is working correctly"
```

---

## Basic Container Operations

### Running Containers

```bash
# Run a container
cx "run an nginx container on port 8080"

# Run in background
cx "run nginx container in background on port 80"

# Run with name
cx "run redis container named my-redis"
```

### Managing Containers

```bash
# List containers
cx "show running containers"
cx "show all containers including stopped"

# Stop containers
cx "stop the nginx container"
cx "stop all running containers"

# Remove containers
cx "remove stopped containers"
cx "remove all containers"
```

### Container Logs

```bash
# View logs
cx "show logs from nginx container"

# Follow logs
cx "follow logs from my-app container"

# Recent logs
cx "show last 100 log lines from my-app"
```

### Container Shell

```bash
# Enter container
cx "open shell in the nginx container"

# Run command
cx "run 'cat /etc/nginx/nginx.conf' in nginx container"
```

---

## Image Management

### Pulling Images

```bash
# Pull image
cx "pull the latest nginx image"

# Specific version
cx "pull node version 18 alpine image"
```

### Listing Images

```bash
cx "show all docker images"
cx "show images taking the most space"
```

### Cleaning Up

```bash
# Remove unused images
cx "remove unused docker images"

# Full cleanup
cx "clean up all unused docker resources"

# Specific image
cx "remove the old nginx image"
```

---

## Building Images

### Basic Build

```bash
# Build from Dockerfile
cx "build docker image from this directory"

# With tag
cx "build docker image and tag as myapp:v1"
```

### Build Optimization

```bash
# Multi-stage build help
cx "help me create a multi-stage dockerfile for this node app"

# Optimize existing
cx "how can I reduce the size of this docker image?"
```

### Build Troubleshooting

```bash
# Debug failed build
cx "my docker build is failing, help me fix it"

# Layer caching
cx "why isn't docker caching my build layers?"
```

---

## Docker Compose

### Basic Compose

```bash
# Start services
cx "start docker compose services"

# Stop services
cx "stop docker compose services"

# Restart
cx "restart the web service in docker compose"
```

### Managing Services

```bash
# Scale service
cx "scale the worker service to 3 instances"

# View logs
cx "show logs from all compose services"

# Status
cx "show status of docker compose services"
```

### Compose Files

```bash
# Create compose file
cx "create docker compose file for node app with postgres and redis"

# Validate
cx "validate this docker compose file"

# Convert
cx "help me convert this docker run command to compose"
```

### Example Compose Generation

```bash
cx "create docker compose for a MERN stack application"
```

Cortex generates:

```yaml
version: '3.8'

services:
  mongodb:
    image: mongo:6
    volumes:
      - mongo-data:/data/db
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PASSWORD}
    networks:
      - backend

  api:
    build: ./api
    ports:
      - "3000:3000"
    environment:
      MONGO_URI: mongodb://mongodb:27017/myapp
      NODE_ENV: production
    depends_on:
      - mongodb
    networks:
      - backend
      - frontend

  client:
    build: ./client
    ports:
      - "80:80"
    depends_on:
      - api
    networks:
      - frontend

networks:
  frontend:
  backend:

volumes:
  mongo-data:
```

---

## Networking

### Network Management

```bash
# Create network
cx "create docker network for my microservices"

# List networks
cx "show docker networks"

# Connect container
cx "connect my-app container to the backend network"

# Inspect
cx "show which containers are on the backend network"
```

### Network Troubleshooting

```bash
# Debug connectivity
cx "container A can't connect to container B, help me debug"

# DNS issues
cx "docker container dns resolution isn't working"
```

---

## Volumes and Data

### Volume Management

```bash
# Create volume
cx "create docker volume for database data"

# List volumes
cx "show docker volumes"

# Inspect volume
cx "where is the postgres-data volume stored?"

# Remove volume
cx "remove unused docker volumes"
```

### Bind Mounts

```bash
# Development mount
cx "run node container with current directory mounted for development"
```

### Backup and Restore

```bash
# Backup volume
cx "backup the postgres-data volume to a tar file"

# Restore volume
cx "restore postgres-data volume from backup.tar"
```

---

## Development Workflow

### Development Containers

```bash
# Run dev environment
cx "run development container for this nodejs project"

# Hot reload
cx "set up docker container with hot reload for react development"
```

### Debug Containers

```bash
# Inspect container
cx "show detailed information about my-app container"

# Resource usage
cx "show memory and cpu usage of running containers"

# Processes
cx "show processes running in my-app container"
```

### Testing

```bash
# Run tests in container
cx "run tests in a docker container"

# CI environment
cx "set up docker container matching CI environment for testing"
```

---

## Production Deployment

### Deploying Applications

```bash
# Deploy with compose
cx "deploy my application using docker compose in production mode"

# Update service
cx "update the web service to the new image version"

# Rolling update
cx "perform rolling update of the api service"
```

### Health Checks

```bash
# Add health check
cx "add health check to my docker container"

# Check container health
cx "show health status of all containers"
```

### Resource Limits

```bash
# Set limits
cx "run container with 512MB memory limit and 0.5 CPU"

# Update limits
cx "update my-app container to use max 1GB memory"
```

---

## Registry Operations

### Docker Hub

```bash
# Login
cx "login to docker hub"

# Push image
cx "push myapp:v1 to docker hub"

# Pull private image
cx "pull private image from my docker hub account"
```

### Private Registry

```bash
# Set up registry
cx "set up local docker registry"

# Configure auth
cx "configure docker to use private registry at registry.company.com"

# Push to private
cx "push myapp:v1 to our private registry"
```

---

## Docker and Cortex Best Practices

### Using Cortex Inside Containers

```dockerfile
# Dockerfile with Cortex
FROM ubuntu:22.04

# Install Cortex
RUN curl -fsSL https://cortexlinux.com/install.sh | bash

# Use Cortex for setup
RUN cx "install python development environment"
```

### Cortex with Docker Host

```bash
# Manage host docker from Cortex
cx "show docker containers on this host"

# Remote docker
DOCKER_HOST=tcp://remote:2375 cx "list containers on remote docker"
```

---

## Kubernetes Integration

### Basic kubectl

```bash
# Install kubectl
cx "install kubectl"

# Get resources
cx "show kubernetes pods in default namespace"

# Deploy
cx "deploy my-app using the kubernetes manifest"
```

### Minikube

```bash
# Install minikube
cx "set up minikube for local kubernetes"

# Start cluster
cx "start minikube cluster"

# Deploy to minikube
cx "deploy nginx to minikube"
```

### Convert Compose to K8s

```bash
cx "convert my docker compose file to kubernetes manifests"
```

---

## Troubleshooting

### Common Issues

```bash
# Permission denied
cx "docker permission denied error"

# Port in use
cx "docker port 80 already in use"

# Out of disk space
cx "docker is using too much disk space"

# Container won't start
cx "help me debug why my container exits immediately"
```

### Diagnostics

```bash
# System info
cx "show docker system information"

# Events
cx "show recent docker events"

# Inspect issues
cx "diagnose docker problems on this system"
```

---

## Next Steps

- [CI/CD Usage](/docs/tutorials/cicd-usage) - Docker in CI/CD pipelines
- [Server Configuration](/docs/tutorials/server-configuration) - Production servers
- [Dev Environments](/docs/tutorials/dev-environments) - Development setup
