---
sidebar_position: 3
title: Docker Integration
description: Use Cortex with Docker for containerized development and deployment. Build, manage, and orchestrate containers.
keywords: [docker, containers, compose, kubernetes, deployment]
---

# Docker Integration

This tutorial covers using Cortex for Docker operations. From basic container management to complex orchestration, Cortex simplifies containerized workflows.

## Time Required

- Basic Docker: 10 minutes
- Full orchestration: 30-60 minutes

## Prerequisites

- Docker installed (or let Cortex install it)
- Cortex installed

## Installing Docker

### Quick Install

```bash
cortex "install docker"
```

Cortex will:
1. Add Docker repository
2. Install Docker CE
3. Install Docker Compose
4. Add your user to the docker group
5. Start and enable Docker service

### Verify Installation

```bash
cortex "verify docker is working correctly"
```

---

## Basic Container Operations

### Running Containers

```bash
# Run a container
cortex "run an nginx container on port 8080"

# Run in background
cortex "run nginx container in background on port 80"

# Run with name
cortex "run redis container named my-redis"
```

### Managing Containers

```bash
# List containers
cortex "show running containers"
cortex "show all containers including stopped"

# Stop containers
cortex "stop the nginx container"
cortex "stop all running containers"

# Remove containers
cortex "remove stopped containers"
cortex "remove all containers"
```

### Container Logs

```bash
# View logs
cortex "show logs from nginx container"

# Follow logs
cortex "follow logs from my-app container"

# Recent logs
cortex "show last 100 log lines from my-app"
```

### Container Shell

```bash
# Enter container
cortex "open shell in the nginx container"

# Run command
cortex "run 'cat /etc/nginx/nginx.conf' in nginx container"
```

---

## Image Management

### Pulling Images

```bash
# Pull image
cortex "pull the latest nginx image"

# Specific version
cortex "pull node version 18 alpine image"
```

### Listing Images

```bash
cortex "show all docker images"
cortex "show images taking the most space"
```

### Cleaning Up

```bash
# Remove unused images
cortex "remove unused docker images"

# Full cleanup
cortex "clean up all unused docker resources"

# Specific image
cortex "remove the old nginx image"
```

---

## Building Images

### Basic Build

```bash
# Build from Dockerfile
cortex "build docker image from this directory"

# With tag
cortex "build docker image and tag as myapp:v1"
```

### Build Optimization

```bash
# Multi-stage build help
cortex "help me create a multi-stage dockerfile for this node app"

# Optimize existing
cortex "how can I reduce the size of this docker image?"
```

### Build Troubleshooting

```bash
# Debug failed build
cortex "my docker build is failing, help me fix it"

# Layer caching
cortex "why isn't docker caching my build layers?"
```

---

## Docker Compose

### Basic Compose

```bash
# Start services
cortex "start docker compose services"

# Stop services
cortex "stop docker compose services"

# Restart
cortex "restart the web service in docker compose"
```

### Managing Services

```bash
# Scale service
cortex "scale the worker service to 3 instances"

# View logs
cortex "show logs from all compose services"

# Status
cortex "show status of docker compose services"
```

### Compose Files

```bash
# Create compose file
cortex "create docker compose file for node app with postgres and redis"

# Validate
cortex "validate this docker compose file"

# Convert
cortex "help me convert this docker run command to compose"
```

### Example Compose Generation

```bash
cortex "create docker compose for a MERN stack application"
```

Cortex generates:

```yaml
version: '3.8'

services:
  mongodb:
    image: mongo:6
    volumes:
      - mongo-data:/data/db
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PASSWORD}
    networks:
      - backend

  api:
    build: ./api
    ports:
      - "3000:3000"
    environment:
      MONGO_URI: mongodb://mongodb:27017/myapp
      NODE_ENV: production
    depends_on:
      - mongodb
    networks:
      - backend
      - frontend

  client:
    build: ./client
    ports:
      - "80:80"
    depends_on:
      - api
    networks:
      - frontend

networks:
  frontend:
  backend:

volumes:
  mongo-data:
```

---

## Networking

### Network Management

```bash
# Create network
cortex "create docker network for my microservices"

# List networks
cortex "show docker networks"

# Connect container
cortex "connect my-app container to the backend network"

# Inspect
cortex "show which containers are on the backend network"
```

### Network Troubleshooting

```bash
# Debug connectivity
cortex "container A can't connect to container B, help me debug"

# DNS issues
cortex "docker container dns resolution isn't working"
```

---

## Volumes and Data

### Volume Management

```bash
# Create volume
cortex "create docker volume for database data"

# List volumes
cortex "show docker volumes"

# Inspect volume
cortex "where is the postgres-data volume stored?"

# Remove volume
cortex "remove unused docker volumes"
```

### Bind Mounts

```bash
# Development mount
cortex "run node container with current directory mounted for development"
```

### Backup and Restore

```bash
# Backup volume
cortex "backup the postgres-data volume to a tar file"

# Restore volume
cortex "restore postgres-data volume from backup.tar"
```

---

## Development Workflow

### Development Containers

```bash
# Run dev environment
cortex "run development container for this nodejs project"

# Hot reload
cortex "set up docker container with hot reload for react development"
```

### Debug Containers

```bash
# Inspect container
cortex "show detailed information about my-app container"

# Resource usage
cortex "show memory and cpu usage of running containers"

# Processes
cortex "show processes running in my-app container"
```

### Testing

```bash
# Run tests in container
cortex "run tests in a docker container"

# CI environment
cortex "set up docker container matching CI environment for testing"
```

---

## Production Deployment

### Deploying Applications

```bash
# Deploy with compose
cortex "deploy my application using docker compose in production mode"

# Update service
cortex "update the web service to the new image version"

# Rolling update
cortex "perform rolling update of the api service"
```

### Health Checks

```bash
# Add health check
cortex "add health check to my docker container"

# Check container health
cortex "show health status of all containers"
```

### Resource Limits

```bash
# Set limits
cortex "run container with 512MB memory limit and 0.5 CPU"

# Update limits
cortex "update my-app container to use max 1GB memory"
```

---

## Registry Operations

### Docker Hub

```bash
# Login
cortex "login to docker hub"

# Push image
cortex "push myapp:v1 to docker hub"

# Pull private image
cortex "pull private image from my docker hub account"
```

### Private Registry

```bash
# Set up registry
cortex "set up local docker registry"

# Configure auth
cortex "configure docker to use private registry at registry.company.com"

# Push to private
cortex "push myapp:v1 to our private registry"
```

---

## Docker and Cortex Best Practices

### Using Cortex Inside Containers

```dockerfile
# Dockerfile with Cortex
FROM ubuntu:22.04

# Install Cortex
RUN curl -fsSL https://cortexlinux.com/install.sh | bash

# Use Cortex for setup
RUN cortex "install python development environment"
```

### Cortex with Docker Host

```bash
# Manage host docker from Cortex
cortex "show docker containers on this host"

# Remote docker
DOCKER_HOST=tcp://remote:2375 cortex "list containers on remote docker"
```

---

## Kubernetes Integration

### Basic kubectl

```bash
# Install kubectl
cortex "install kubectl"

# Get resources
cortex "show kubernetes pods in default namespace"

# Deploy
cortex "deploy my-app using the kubernetes manifest"
```

### Minikube

```bash
# Install minikube
cortex "set up minikube for local kubernetes"

# Start cluster
cortex "start minikube cluster"

# Deploy to minikube
cortex "deploy nginx to minikube"
```

### Convert Compose to K8s

```bash
cortex "convert my docker compose file to kubernetes manifests"
```

---

## Troubleshooting

### Common Issues

```bash
# Permission denied
cortex "docker permission denied error"

# Port in use
cortex "docker port 80 already in use"

# Out of disk space
cortex "docker is using too much disk space"

# Container won't start
cortex "help me debug why my container exits immediately"
```

### Diagnostics

```bash
# System info
cortex "show docker system information"

# Events
cortex "show recent docker events"

# Inspect issues
cortex "diagnose docker problems on this system"
```

---

## Next Steps

- [CI/CD Usage](/docs/tutorials/cicd-usage) - Docker in CI/CD pipelines
- [Server Configuration](/docs/tutorials/server-configuration) - Production servers
- [Dev Environments](/docs/tutorials/dev-environments) - Development setup
